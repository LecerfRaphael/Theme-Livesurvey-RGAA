<section class="accessibilite-ls" style="max-width:900px;margin:auto;font-size:1.1rem;line-height:1.6;">

<header>
  <h1 style="text-align:center;font-size:2rem;margin-bottom:1rem;">
    âœ¨ Des questionnaires en ligne plus simples, plus clairs, plus accessibles
  </h1>
  <p style="text-align:center;color:#555;">
    <b>UniversitÃ© de Lille â€¢ Pack AccessibilitÃ© LimeSurvey compatible version 6.3.9+231211 / 6.15.22+251103</b>
  </p>
</header>

<main role="main">

  <p>
    Ã€ lâ€™UniversitÃ© de Lille, nous avons profondÃ©ment amÃ©liorÃ© lâ€™expÃ©rience des questionnaires LimeSurvey pour les rendre 
    <strong>plus agrÃ©ables, plus intuitifs et plus accessibles Ã  tous</strong> ğŸ˜„  
    Que vous utilisiez un ordinateur, un smartphone, un clavier ou un lecteur dâ€™Ã©cranâ€¦  
    <strong>moins de contraintes, plus de clartÃ©.</strong>
  </p>

  <hr>

  <!-- NAVIGATION -->
  <h2>ğŸ§­ Une navigation plus fluide : une seule question Ã  corriger Ã  la fois</h2>
  <ul>
    <li>âœ”ï¸ Validation <strong>pas Ã  pas</strong> : seule la premiÃ¨re question en erreur est affichÃ©e.</li>
    <li>âœ”ï¸ Message dâ€™erreur affichÃ© directement auprÃ¨s de la question concernÃ©e.</li>
    <li>âœ”ï¸ Focus automatique sur lâ€™endroit Ã  corriger.</li>
  </ul>
  <p>ğŸ’¡ RÃ©sultat : vous savez <strong>exactement quoi faire</strong> pour avancer, sans stress.</p>

  <hr>

  <!-- STRUCTURE -->
  <h2>ğŸ§© Des questionnaires mieux organisÃ©s et plus comprÃ©hensibles</h2>
  <ul>
    <li>ğŸ—‚ï¸ Groupes de rÃ©ponses mieux identifiÃ©s (Oui/Non, listes, cases Ã  cocherâ€¦).</li>
    <li>ğŸ‘€ <strong>Utilisation correcte des landmarks HTML</strong> : 
      <code>&lt;header role="banner"&gt;</code>, <code>&lt;main role="main"&gt;</code>, 
      <code>&lt;footer role="contentinfo"&gt;</code>.
      <br><em>(LimeSurvey nâ€™en utilise pas nativement, nous les avons ajoutÃ©s.)</em>
    </li>
    <li>ğŸ§± Champs obligatoires seulement lorsquâ€™ils sont visibles.</li>
    <li>ğŸš« Plus de blocages causÃ©s par des champs cachÃ©s ou non pertinents.</li>
  </ul>

  <hr>

  <!-- DESIGN -->
  <h2>ğŸ¨ Un affichage plus confortable : contraste, couleurs et focus visibles</h2>
  <ul>
    <li>ğŸ¨ <strong>Correction des contrastes</strong> et couleurs trop faibles.</li>
    <li>ğŸ” <strong>Focus clavier renforcÃ©</strong> sur les boutons radio ğŸ”˜ et cases Ã  cocher â˜‘ï¸ : contour net + fond clair.</li>
    <li>ğŸ–±ï¸ Meilleure visibilitÃ© pour les utilisateurs au clavier ou malvoyants.</li>
  </ul>

  <hr>

  <!-- CHAMPS -->
  <h2>ğŸ“… Saisir une date, un email ou un numÃ©ro : enfin simple</h2>
  <ul>
    <li>ğŸ“… Dates en trois champs clairs : <strong>Jour / Mois / AnnÃ©e</strong>.</li>
    <li>âœ‰ï¸ Champs email optimisÃ©s pour smartphone (clavier email).</li>
    <li>ğŸ“± TÃ©lÃ©phone et chiffres : saisie numÃ©rique adaptÃ©e.</li>
    <li>ğŸ—‘ï¸ Suppression des calendriers doublons de LimeSurvey.</li>
  </ul>

  <hr>

  <!-- AUTRE -->
  <h2>ğŸ’¬ â€œAutre, prÃ©cisezâ€ devient clair et logique</h2>
  <ul>
    <li>âœ¨ Le champ texte â€œAutreâ€ apparaÃ®t uniquement si lâ€™option â€œAutreâ€ est choisie.</li>
    <li>ğŸ” Taper du texte coche automatiquement â€œAutreâ€.</li>
    <li>ğŸ˜Œ Plus de messages dâ€™erreur sur des commentaires non concernÃ©s.</li>
  </ul>

  <hr>

  <!-- ARIA -->
  <h2>ğŸ—£ï¸ Messages accessibles et retours vocaux</h2>
  <ul>
    <li>ğŸ”” Alerte correctement annoncÃ©e par les lecteurs dâ€™Ã©cran au bon moment.</li>
    <li>ğŸ¤« Les textes dâ€™aide ne sont plus lus comme des â€œalertesâ€.</li>
    <li>â³ Message vocal lors de lâ€™envoi : â€œVotre formulaire est en cours de traitement.â€</li>
    <li>ğŸ‰ <strong>Message final avec rÃ´le dâ€™alerte :</strong>  
      â€œVos rÃ©ponses ont bien Ã©tÃ© enregistrÃ©es.â€</li>
  </ul>

  <hr>

  <!-- CLAVIER -->
  <h2>âŒ¨ï¸ Confort renforcÃ© pour les utilisateurs au clavier</h2>
  <ul>
    <li>â†©ï¸ La touche <strong>EntrÃ©e</strong> permet dâ€™avancer logiquement.</li>
    <li>ğŸ¯ Indicateur de focus visuel beaucoup plus net.</li>
    <li>â™¿ Navigation fluide sans souris.</li>
  </ul>

  <hr>

<section id="notice-technique-4f-4g" style="max-width:900px;margin:auto;line-height:1.6;font-size:1rem;">

  <h2>Notice technique â€“ Modules 4f et 4g (LimeSurvey)</h2>

  <p>
    Ces deux scripts JavaScript complÃ¨tent le pack dâ€™accessibilitÃ© LimeSurvey en apportant une
    gestion robuste de la <strong>visibilitÃ© des questions conditionnelles</strong> :
    synchronisation avec lâ€™Expression Manager, masquage manuel maÃ®trisÃ©, nettoyage des rÃ©ponses
    et logique gÃ©nÃ©rique pour les questions de type <em>â€œSi ouiâ€¦â€</em>.
  </p>

  <h3>Objectifs principaux</h3>
  <ul>
    <li>Assurer la cohÃ©rence entre la <strong>pertinence EM</strong> (relevance) et lâ€™<strong>affichage rÃ©el</strong> dans le DOM.</li>
    <li>Corriger automatiquement les questions qui redeviennent pertinentes mais restent masquÃ©es.</li>
    <li>GÃ©rer de faÃ§on gÃ©nÃ©rique les questions dÃ©pendantes de type <strong>â€œSi oui, â€¦â€</strong> sans Expression Manager.</li>
    <li>Ã‰viter tout blocage liÃ© Ã  des rÃ©ponses rÃ©siduelles sur des questions masquÃ©es.</li>
    <li>Respecter les rÃ¨gles dâ€™accessibilitÃ© (aria-hidden, focus, required, etc.).</li>
  </ul>

  <hr>

  <h3>4f â€“ RÃ©affichage automatique des questions redevenues pertinentes</h3>

  <h4>ProblÃ¨me adressÃ©</h4>
  <p>
    LimeSurvey laisse parfois des questions en Ã©tat masquÃ© (<code>ls-hidden</code>, <code>hidden</code>,
    <code>display:none</code>) alors que lâ€™Expression Manager les considÃ¨re de nouveau pertinentes
    (relevance = 1). Cela peut provoquer :
  </p>
  <ul>
    <li>des questions â€œfantÃ´mesâ€ attendues mais invisibles ;</li>
    <li>des erreurs sur des champs <code>required</code> non visibles ;</li>
    <li>des incohÃ©rences de navigation au clavier et pour les lecteurs dâ€™Ã©cran.</li>
  </ul>

  <h4>Principe de fonctionnement</h4>
  <ul>
    <li>Au chargement (<code>DOMContentLoaded</code>), le script parcourt toutes les questions :
      <code>fieldset[id^="question"]</code> et <code>div[id^="question"]</code>.
    </li>
    <li>Pour chaque question :
      <ul>
        <li>si lâ€™ID commence par <code>question</code>,</li>
        <li>si la question nâ€™est plus <code>ls-irrelevant</code>,</li>
        <li>si elle est encore masquÃ©e (<code>ls-hidden</code>, <code>hidden</code> ou <code>display:none</code>),</li>
        <li>et si elle nâ€™a pas Ã©tÃ© masquÃ©e volontairement par JS (<code>data-ls-manual-hide="1"</code>),</li>
      </ul>
      alors la fonction <code>unhideIfRelevant()</code> la rÃ©affiche.
    </li>
    <li>Un <code>MutationObserver</code> surveille ensuite les changements de classe :
      dÃ¨s quâ€™une question voit son <code>ls-irrelevant</code> enlevÃ© par LimeSurvey,
      <code>unhideIfRelevant()</code> est relancÃ©.
    </li>
  </ul>

  <h4>Normalisation accessibilitÃ© appliquÃ©e</h4>
  <p>Lorsque la question est rÃ©affichÃ©e, le script :</p>
  <ul>
    <li>retire <code>ls-hidden</code> ;</li>
    <li>retire lâ€™attribut <code>hidden</code> ;</li>
    <li>rÃ©initialise <code>style.display</code> si nÃ©cessaire ;</li>
    <li>positionne <code>aria-hidden="false"</code>.</li>
  </ul>

  <h4>Respect du masquage manuel</h4>
  <p>
    Si une question est masquÃ©e volontairement par le module 4g, elle porte
    <code>data-ls-manual-hide="1"</code>. Dans ce cas, <code>unhideIfRelevant()</code> ne la rÃ©ouvrira
    pas, mÃªme si lâ€™Expression Manager la juge pertinente.
  </p>

  <hr>

  <h3>4g â€“ Gestion gÃ©nÃ©rique des questions â€œSi oui, â€¦â€</h3>

  <h4>Objectif</h4>
  <p>
    Proposer un mÃ©canisme gÃ©nÃ©rique pour gÃ©rer les questions dÃ©pendantes,
    typiquement : Â« Si oui, prÃ©cisez : â€¦ Â», sans avoir Ã  Ã©crire des conditions
    Expression Manager pour chaque cas.
  </p>

  <h4>DÃ©tection des questions enfants</h4>
  <p>Une question enfant est dÃ©tectÃ©e si :</p>
  <ul>
    <li>le texte de son <code>&lt;legend&gt;</code> commence par <strong>â€œSi ouiâ€</strong> (en minuscules aprÃ¨s trim), ou</li>
    <li>la question possÃ¨de la classe CSS <code>si-oui-child</code>.</li>
  </ul>

  <p>
    La fonction <code>initSiOuiQuestions()</code> parcourt tous les
    <code>fieldset.question-container</code> du DOM et identifie automatiquement ces questions enfants.
  </p>

  <h4>DÃ©termination de la question parente</h4>
  <ul>
    <li>La question parente est recherchÃ©e via <code>previousElementSibling</code> en remontant
      jusquâ€™au prÃ©cÃ©dent <code>fieldset.question-container</code> ou <code>div.question-container</code>.
    </li>
    <li>Si aucune question parente nâ€™est trouvÃ©e, le couple parent/enfant est ignorÃ©.</li>
  </ul>

  <h4>Logique dâ€™affichage / masquage</h4>
  <p>La fonction <code>wireParentChildSiOui(parentQ, childQ)</code> :</p>
  <ul>
    <li>rÃ©cupÃ¨re tous les boutons radio de la question parente ;</li>
    <li>analyse le libellÃ© des options pour trouver une option contenant â€œouiâ€ ;</li>
    <li>si une option â€œOuiâ€ est cochÃ©e â†’ <strong>affiche</strong> la question enfant ;</li>
    <li>sinon â†’ <strong>masque</strong> la question enfant et nettoie ses rÃ©ponses.</li>
  </ul>

  <h4>Masquage manuel contrÃ´lÃ©</h4>
  <p>Lorsquâ€™une question enfant est masquÃ©e par 4g :</p>
  <ul>
    <li>elle reÃ§oit <code>data-ls-manual-hide="1"</code> ;</li>
    <li>la classe <code>ls-hidden</code> est ajoutÃ©e ;</li>
    <li>les attributs <code>hidden="hidden"</code> et <code>aria-hidden="true"</code> sont posÃ©s ;</li>
    <li><code>style.display = "none"</code> est appliquÃ©.</li>
  </ul>

  <p>
    Ce marquage garantit que 4f ne la rÃ©affichera pas tant que lâ€™utilisateur nâ€™a pas mis â€œOuiâ€ sur la
    question parente.
  </p>

  <h4>Nettoyage des rÃ©ponses</h4>
  <p>Lors du masquage, 4g nettoie systÃ©matiquement les rÃ©ponses de la question enfant :</p>
  <ul>
    <li>radios et checkboxes : <code>checked = false</code> ;</li>
    <li>listes dÃ©roulantes : <code>selectedIndex = 0</code> ;</li>
    <li>champs texte / textarea : <code>value = ""</code> ;</li>
    <li>attribut <code>required</code> retirÃ© de tous les champs.</li>
  </ul>

  <p>
    Cela Ã©vite les validations bloquantes sur des rÃ©ponses non visibles et maintient la
    cohÃ©rence des donnÃ©es cÃ´tÃ© serveur.
  </p>

  <h4>AccessibilitÃ©</h4>
  <ul>
    <li>Le masquage utilise <code>aria-hidden="true"</code> + <code>hidden</code> + <code>display:none</code> pour
      sortir la question du flux accessible.</li>
    <li>Lâ€™affichage remet <code>aria-hidden="false"</code> et retire les attributs de masquage.</li>
    <li>Aucune question masquÃ©e nâ€™est laissÃ©e avec des champs <code>required</code>.</li>
  </ul>

  <hr>

  <h3>IntÃ©gration</h3>
  <ul>
    <li>Les scripts 4f et 4g peuvent Ãªtre intÃ©grÃ©s dans le fichier de thÃ¨me (ex. <code>template.js</code>) de LimeSurvey.</li>
    <li>Ils reposent sur les classes standard LimeSurvey (<code>question-container</code>, <code>ls-hidden</code>,
      <code>ls-irrelevant</code>, etc.).</li>
    <li>Ils sont compatibles avec la navigation PJAX (<code>pjax:success</code>).</li>
  </ul>

  <p>
    Ensemble, ces modules renforcent la cohÃ©rence, la stabilitÃ© et lâ€™accessibilitÃ© des questionnaires,
    en particulier pour les questions conditionnelles et les parcours complexes.
  </p>

</section>


<hr>

  <!-- FOOT -->
  <footer role="contentinfo">
    <h2>ğŸ¤ Une dÃ©marche dâ€™accessibilitÃ© continue</h2>
    <p>
      Ce pack est dÃ©veloppÃ© par la <strong>Direction du numÃ©rique â€“ Service DAWAM â€¢ UniversitÃ© de Lille</strong>, 
      dans une volontÃ© de respecter les bonnes pratiques du <strong>RGAA 4</strong> et d'amÃ©liorer constamment lâ€™expÃ©rience utilisateur.
    </p>
    <p>
      ğŸ“¬ Contact : <a href="mailto:raphael.lecerf@univ-lille.fr">raphael.lecerf@univ-lille.fr</a> / <a href="mailto:support-liemsurvey@univ-lille.fr">support-limesurvey@univ-lille.fr</a>
    </p>
  </footer>

</main>

</section>
